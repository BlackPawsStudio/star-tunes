(()=>{"use strict";var e={d:(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};e.d({},{K:()=>Q});const n=(async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=octaves");return await e.json()})();for(let n=0;n<e.length;n++){const t=[],a=[],s=[];for(let t=0;t<e[n][2].length;t++){const l={note:e[n][2][t][1],freq:e[n][2][t][2],keyCode:e[n][2][t][3]};1!=l.note.length?s.push(l):a.push(l)}t.push(a),t.push(s);const l={name:e[n][1],notes:t};e[n]=l}return e})(),t=(async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=color");return await e.json()})();for(let n=0;n<e.length;n++){const t={id:e[n][0],name:e[n][1],piano:e[n][2],keys:e[n][3]};e[n]=t}return e})(),a=document.getElementsByClassName("w-tile"),s=document.getElementsByClassName("b-tile"),l=document.getElementsByClassName("setup-color"),i=document.getElementsByClassName("setup-select"),o=[],c=async(e,t,a)=>{try{const s=document.getElementById("volume"),l=+s.value/+s.max;a.gain.setValueAtTime(l*l,0);const r=t.createOscillator();r.type=i[1].options[i[1].value].innerHTML.toLowerCase(),r.connect(a);const d=document.getElementsByClassName("tile"),u=await(async e=>{try{const t=(await n)[i[2].value].notes.flat().find((n=>{if(n.keyCode==e)return n}));return[t.freq,t.note]}catch{return!1}})(e.keyCode);if(u){const n=u;let a;r.frequency.setValueAtTime(n[0],0);for(let e=0;e<d.length;e++)d[e].innerHTML===n[1]&&(a=d[e]);a.classList.add("tile-pressed"),r.start(),document.addEventListener("keyup",(()=>{o.splice(o.indexOf(e.keyCode),1),document.removeEventListener("keydown",c,!1),a.classList.remove("tile-pressed"),r.stop(t.currentTime+.03)}))}}catch{return}},r=document.getElementsByClassName("sun-cloud"),d=document.getElementById("sun"),u=document.getElementsByTagName("aside")[0],m=document.getElementById("body-container");d.addEventListener("click",(()=>{u.classList.toggle("slide"),m.addEventListener("click",(()=>{u.classList.remove("slide")}))})),d.addEventListener("mouseenter",(()=>{r[0].classList.add("cloud-move-f"),r[1].classList.add("cloud-move-b"),d.addEventListener("mouseleave",(()=>{r[0].classList.remove("cloud-move-f"),r[1].classList.remove("cloud-move-b")}))}));const p=(async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=waves");return await e.json()})();for(let n=0;n<e.length;n++){const t=e[n][1];e[n]=t}return e})(),g=async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=songs");return await e.json()})();for(let n=0;n<e.length;n++){const t={id:e[n][0],name:e[n][1],url:e[n][2],genre:e[n][3],mark:e[n][4],reviews:e[n][5],author:e[n][6]};e[n]=t}return e},v=(g(),async e=>{const n=await fetch(`https://star-tunes.herokuapp.com/?delete=song&id=${e}`);console.log(await n.json())}),y=async e=>{const n=await fetch(`https://star-tunes.herokuapp.com/?update=song&id=${e.id}&name=${e.name}&url=${e.url}&genre=${e.genre}`);console.log(await n.json())},h=async(e,n)=>{const t=await(async(e,n)=>{const t=await fetch(`https://star-tunes.herokuapp.com/?filter=songs&author=${e}&genre=${n}`);return await t.json()})(e,n);if("string"==typeof t)return k(t),"";for(let e=0;e<t.length;e++){const n={id:t[e][0],name:t[e][1],url:t[e][2],genre:t[e][3],mark:t[e][4],reviews:t[e][5],author:t[e][6]};t[e]=n}return t},b=async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=users");return await e.json()})();for(let n=0;n<e.length;n++){const t={id:e[n][0],name:e[n][1],password:e[n][2],rating:e[n][3],marked:["cringe"],songs:["cringe"],pfp:e[n][5]};e[n]=t}return e},f=async e=>{let t="";const a=e?7:6,s=await n;for(let n=0;n<a;n++)t+=e?`<div class="w-tile tile">${await s[0].notes[0][n].note}</div>`:`<div class="b-tile tile">${await s[0].notes[1][n].note}</div>`;return t},w=e=>{let n="";for(let t=0;t<e;t++)n+="☆";return n},L=e=>{let n="";for(let t=0;t<e.marked.length;t++)n+='\n    <li class="marked-song">\n      <label class="top-position">0</label>\n      <label class="marked-name">Cringe song</label>\n      <div class="song-info-alt">\n        <p class="alt-text">info</p>\n        <div class="song-info">\n          <label class="song-info-author">username</label>\n          <p class="song-info-line"></p>\n          <div class="song-info-mark">☆</div>\n        </div>\n      </div>\n    </li>\n    ';return n},E=async e=>{const n=await g(),t=[];for(let a=0;a<n.length;a++)n[a].author==e.name&&t.push(n[a]);let a="";for(let e=0;e<t.length;e++)a+=`\n    <li class="profile-song">\n      <label class="song-id">${t[e].id}</label>\n      <div class="song">\n        <div class="player">\n          <button class="play-button">\n            <div class="play-button-back"></div>\n            <div class="play-button-front"></div> \n          </button>\n          <div class="profile-play-data">\n          <label>Name: \n            <input class="url-container profile-song-name" value=${t[e].name}>\n          </label>\n          <label>URL: \n            <input class="url-container profile-song-url" value=${t[e].url}>\n          </label>\n          <label>Genre: \n            <input class="url-container profile-song-genre" value=${t[e].genre}>\n          </label>\n          </div>\n        </div>\n      </div>\n      <div class="song-btns">\n        <button class="update-song">Update song</button>\n        <button class="delete-song">Delete song</button>\n      </div>\n    </li>\n    `;return a},k=e=>{const n=document.getElementById("message-container"),t=document.getElementsByClassName("message-btn")[0];document.getElementById("message-text").innerHTML=e,n.style.opacity=100,n.style.visibility="visible",t.addEventListener("click",(()=>{n.style.opacity=0,n.style.visibility="hidden"})),document.addEventListener("keydown",(e=>{27!==e.keyCode&&13!==e.keyCode||(n.style.opacity=0,n.style.visibility="hidden")}))},$=async()=>{const e=document.getElementById("url-container"),n=document.getElementsByClassName("message-btn")[1],t=document.getElementsByClassName("message-btn")[2],a=document.getElementsByClassName("url-input"),s=document.getElementById("genres-select"),l=document.getElementById("genre-place");s.addEventListener("input",(()=>{l.innerHTML=s.options[s.value].innerHTML})),e.style.opacity=100,e.style.visibility="visible";const i=(e,n)=>n.map((e=>+e.id)).includes(e)?i(++e,n):e;n.addEventListener("click",(async()=>{const n=a[1].value.replace(/\\/g,"/"),t=await g();try{const o={id:i(0,t),name:a[0].value,url:n,genre:s.options[s.value].innerHTML.toLowerCase(),mark:0,reviews:0,author:Q.name};await(async e=>{const n=await fetch(`https://star-tunes.herokuapp.com/?create=song&id=${e.id}&name=${e.name}&url=${e.url}&genre=${e.genre}&mark=${e.mark}&reviews=${e.reviews}&author=${e.author}`);console.log(await n.json())})(o),a[0].value="",a[1].value="",l.innerHTML="",e.style.opacity=0,e.style.visibility="hidden",await V(Q)}catch{k("Please, give correct link"),a[0].value="",a[1].value="",e.style.opacity=0,e.style.visibility="hidden",$()}})),t.addEventListener("click",(()=>{a[0].value="",a[1].value="",l.innerHTML="",e.style.opacity=0,e.style.visibility="hidden"}))},B=async()=>{const e=['<option value="0" selected></option>'];let n=(await g()).map((e=>e.author));n=n.filter(((e,n,t)=>t.indexOf(e)===n));for(let t=0;t<n.length;t++)e.push(`<option value="${t+1}">${n[t]}</option>`);return e},C=async()=>{const e=['<option value="0" selected></option>'];let n=(await g()).map((e=>e.genre));n=n.filter(((e,n,t)=>t.indexOf(e)===n));for(let t=0;t<n.length;t++)e.push(`<option value="${t+1}">${n[t]}</option>`);return e},T=async e=>{console.log(e);let n="";return e.forEach((e=>{n+=`\n    <li class="top-song">\n      <label class="top-position">${e.id}</label>\n      <div class="song">\n        <div class="player">\n          <button class="play-button">\n            <div class="play-button-back"></div>\n            <div class="play-button-front"></div> \n          </button>\n          <div class="play-data">\n            <div style="width: 100%; display: flex; justify-content: space-between">\n              <label class="song-name">${e.name}</label>\n              <label class="song-genre">${e.genre}</label>\n            </div>\n            <div class="play-line"></div>\n          </div>\n        </div>\n      </div>\n      <div class="song-info-alt">\n        <p class="alt-text">info</p>\n        <div class="song-info">\n          <label class="song-info-author">${e.author}</label>\n          <p class="song-info-line"></p>\n          <div class="song-info-mark">${w(Math.trunc(e.mark/e.reviews))}</div>\n        </div>\n      </div>\n    </li>\n  `})),n},N=async e=>{let n="";return e.forEach((e=>{n+=`\n      <li class="admin-panel-element">\n        <div class="admin-panel-user-data">\n          <label>ID: <span class="song-id-label">${e.id}</span></label>\n          <label>Name: <input class="url-container admin-song-name" type="text" value=${e.name}></label>\n          <label>Url: <input class="url-container admin-song-url" type="text" value=${e.url}></label>\n          <label>Author: ${e.author}</label>\n          <label>Genre: <input class="url-container admin-song-genre" type="text" value=${e.genre}></label>\n          <label>Mark: ${Math.trunc(e.mark/e.reviews)?Math.trunc(e.mark/e.reviews):0}</label>\n        </div>\n        <div class="admin-panel-buttons">\n          <button class="delete-song upd-song">Update song</button>\n          <button class="delete-song del-song">Delete song</button>\n        </div>\n      </li>\n    `})),n},M=[{name:"song name",author:"author name",song:"song file",mark:5,position:0},{name:"song name",author:"author name",song:"song file",mark:4,position:2},{name:"song name",author:"author name",song:"song file",mark:5,position:1},{name:"song name",author:"author name",song:"song file",mark:5,position:4},{name:"song name",author:"author name",song:"song file",mark:3,position:3},{name:"song name",author:"author name",song:"song file",mark:5,position:0},{name:"song name",author:"author name",song:"song file",mark:4,position:2},{name:"song name",author:"author name",song:"song file",mark:5,position:1},{name:"song name",author:"author name",song:"song file",mark:5,position:4},{name:"song name",author:"author name",song:"song file",mark:3,position:3}],H=async e=>{const n=await fetch(`https://star-tunes.herokuapp.com/?delete=user&id=${e.id}`),t=await fetch(`https://star-tunes.herokuapp.com/?delete=songs&author=${e.name}`);console.log(await n.json(),await t.json())},I=async e=>{const n=await fetch(`https://star-tunes.herokuapp.com/?update=user&id=${e.id}&pfp=${e.pfp}`);console.log(await n.json())},x=async(e,t,a,s,l)=>{e.target.classList.add("tile-pressed");const o=document.getElementById("volume"),c=+o.value/+o.max;a.gain.setValueAtTime(c*c,0);const r=t.createOscillator();r.type=i[1].options[i[1].value].innerHTML.toLowerCase(),r.frequency.setValueAtTime(await(async e=>(await n)[i[2].value].notes.flat().find((n=>{if(n.note===e)return n})).freq)(e.target.innerHTML),0),r.connect(a),r.start(),document.addEventListener("mouseup",(()=>{r.stop(t.currentTime)})),s.addEventListener("mouseup",(e=>{r.stop(t.currentTime),e.target.classList.contains("tile")&&e.target.classList.remove("tile-pressed")})),e.target.addEventListener("mouseleave",(()=>{r.stop(t.currentTime)})),s.addEventListener("mouseleave",(e=>{r.stop(t.currentTime),e.target.classList.contains("tile")&&(e.target.classList.remove("tile-hover"),e.target.classList.remove("tile-pressed"))}))},j=async e=>{const n=document.getElementsByClassName("play-button"),t=document.getElementsByClassName("delete-song"),a=document.getElementsByClassName("update-song"),s=document.getElementsByClassName("song-id"),l=document.getElementsByClassName("profile-song-name"),i=document.getElementsByClassName("profile-song-url"),o=document.getElementsByClassName("profile-song-genre");for(let t=0;t<n.length;t++){let a=new Audio(e[t].url);n[t].addEventListener("click",(()=>{n[t].classList.toggle("active-btn"),n[t].classList.contains("active-btn")?a.play():a.pause()}))}for(let e=0;e<t.length;e++)t[e].addEventListener("click",(async()=>{await v(s[e].innerHTML),await V(Q)})),a[e].addEventListener("click",(async()=>{await y({id:s[e].innerHTML,name:l[e].value,url:i[e].value,genre:o[e].value}),await V(Q)}))},q=async(e,n,t)=>{console.log(e);const a=document.getElementById("chat-text-field"),s=document.getElementById("search-filter-btn"),l=document.getElementsByClassName("search-by")[0],i=document.getElementsByClassName("search-by")[1];s.addEventListener("click",(async()=>{const s=await(async e=>{const n=await(async e=>{const n=await fetch(`https://star-tunes.herokuapp.com/?filter=search&value=${e}`);return await n.json()})(e);if("string"==typeof n)return k(n),"";for(let e=0;e<n.length;e++){const t={id:n[e][0],name:n[e][1],url:n[e][2],genre:n[e][3],mark:n[e][4],reviews:n[e][5],author:n[e][6]};n[e]=t}return n})(a.value);"string"!=typeof s?(e.innerHTML=await n(s),t&&await j(s)):e.innerHTML=""})),l.addEventListener("input",(async()=>{const a=l.options[l.value].innerHTML,s=i.options[i.value].innerHTML.toLowerCase(),o=await h(a,s);"string"!=typeof o?(e.innerHTML=await n(o),t&&await j(o)):e.innerHTML=""})),i.addEventListener("input",(async()=>{const a=l.options[l.value].innerHTML,s=i.options[i.value].innerHTML.toLowerCase(),o=await h(a,s);"string"!=typeof o?(e.innerHTML=await n(o),t&&await j(o)):e.innerHTML=""}))},S=document.querySelector("main"),D=document.getElementById("register-btns"),A=()=>{D.innerHTML="",D.innerHTML='\n<button class="header-btn">LOG IN</button>\n<button class="header-btn">SIGN IN</button>\n';const e=document.getElementsByClassName("header-btn")[0];document.getElementsByClassName("header-btn")[1].addEventListener("click",(async()=>{await O(!0)})),e.addEventListener("click",(async()=>{await O(!1)}))},O=async e=>{const n=document.getElementById("popup"),t=document.getElementById("popup-container"),a=document.getElementsByClassName("popup-input");t.style.opacity=100,t.style.visibility="visible",n.innerHTML="",n.innerHTML=(e=>`\n  <div id="popup-sakura"></div>\n  <div id="popup-mountains"></div>\n    <form id="popup-frames" onsubmit="event.preventDefault()">\n    <label>${e?"Sign Up":"Log In"}</label>\n    <input class="popup-input" type="text" placeholder="Name here" autocomplete="false" required>\n    <input class="popup-input" type="password" placeholder="Password" autocomplete="false" required>\n    <div id="popup-btns">\n      <button class="popup-btn" type="submit">${e?"Sign up":"Log In"}</button>\n      <button class="popup-btn" type="submit">Cancel</button>\n    </div>\n  </form>\n  `)(e);const s=document.getElementsByClassName("popup-btn")[0],l=document.getElementsByClassName("popup-btn")[1];let i=await b();s.addEventListener("click",(async()=>{if(e){let e=!1;if(a[0].value&&a[1].value){for(let n=0;n<i.length;n++)i[n].name===a[0].value&&(e=!0);if(e)a[0].value="",a[0].placeholder="This username is taken";else{const e=(n,t)=>t.map((e=>+e.id)).includes(n)?e(++n,t):n,n={id:e(0,i),name:a[0].value,password:a[1].value,rating:0,marked:"''",songs:[],pfp:0};await(async e=>{const n=await fetch(`https://star-tunes.herokuapp.com/?create=user&id=${e.id}&name=${e.name}&password=${e.password}&rating=${e.rating}&marked=${e.marked}&pfp=${e.pfp}`);console.log(await n.json())})(n),i=await b(),t.style.opacity=0,t.style.visibility="hidden",Q=n,await P(Q),"admin"==Q.name&&(document.getElementById("admin-aside-link").style.display="block")}}}else{let e=null;for(let n=0;n<i.length;n++)a[0].value&&a[1].value&&i[n].name==a[0].value&&(e=i[n]);e?e.password===a[1].value?(Q=e,await P(Q),t.style.opacity=0,t.style.visibility="hidden","admin"==Q.name&&(document.getElementById("admin-aside-link").style.display="block")):(a[1].value="",a[1].placeholder="Wrong password"):(a[0].value="",a[0].placeholder="No such user")}})),l.addEventListener("click",(()=>{t.style.opacity=0,t.style.visibility="hidden"})),document.addEventListener("keydown",(e=>{27===e.keyCode&&(t.style.opacity=0,t.style.visibility="hidden")}))},P=async e=>{var n;D.innerHTML="",D.innerHTML=`\n<div id="profile">\n  <button class="header-btn">\n  ${(n=e.name).length>10?n.split("").slice(0,9).join("")+"...":n}\n  </button>\n  <div id="profile-content">\n    <button class="profile-btn">Enter profile</button>\n    <button class="profile-btn">Log out</button>\n    <button class="profile-btn">Delete user</button>\n  </div>\n</div>\n`,await(async e=>{const n=document.getElementsByClassName("profile-btn")[0],t=document.getElementsByClassName("profile-btn")[1],a=document.getElementsByClassName("profile-btn")[2],s=document.getElementById("ask-container"),l=document.getElementsByClassName("question-btn"),i=document.getElementById("question-place");let o=await b();n.addEventListener("click",(()=>{V(e)})),t.addEventListener("click",(()=>{i.innerHTML="Do you want to log out?",s.classList.add("shown"),l[0].addEventListener("click",(()=>{s.classList.remove("shown"),Q=null,A(),F(),document.getElementById("admin-aside-link").style.display="none"})),l[1].addEventListener("click",(()=>{s.classList.remove("shown")}))})),a.addEventListener("click",(async()=>{i.innerHTML="Are you sure you want to delete your account?",s.classList.add("shown"),l[0].addEventListener("click",(async()=>{s.classList.remove("shown"),await H(e),o.splice(o.indexOf(o.find((n=>{if(n.name===e.name)return n}))),1),Q=null,A(),F(),document.getElementById("admin-aside-link").style.display="none"})),l[1].addEventListener("click",(()=>{s.classList.remove("shown")}))}))})(e)},U=async()=>{self.location.href="#piano",u.classList.remove("slide"),S.innerHTML=await(async()=>`\n<div class="piano-setup">\n  <label>Instrument settings</label>\n  <div class="setup-content">\n    <div class="setup-block">\n      <label>Instrument presets</label>\n      <select class="setup-select">\n        <option value="0">Synthezator</option>\n        <option value="1">Classic piano</option>\n        <option value="2">Dudka ebat'</option>\n      </select>\n    </div>  \n    <div class="setup-block">\n      <label>Wave type</label>\n      <select class="setup-select">\n        ${await(async()=>{let e="";const n=await p;for(let t=0;t<n.length;t++)e+=`\n    <option value="${t}">${n[t]}</option>\n    `;return e})()}\n      </select>\n    </div>  \n    <div class="setup-block">\n      <label>Octaves</label>\n      <select class="setup-select">\n        ${await(async()=>{let e="";const t=await n;for(let n=0;n<await t.length;n++)e+=3===n?`\n      <option value="${n}" selected>${await t[n].name}</option>\n      `:`\n      <option value="${n}">${await t[n].name}</option>\n      `;return e})()}\n      </select>\n    </div>  \n    <div class="setup-block">\n      <label>Volume</label>\n      <input type="range" id="volume" min="0" max="100" value="50">\n    </div>\n  </div>\n  <img src="assets/img/info-triangle.svg">\n  </div>\n  <div class="piano-setup" id="color-setup">\n  <label>Color settings</label>\n    <div class="setup-content">\n      <div class="setup-block">\n        <label>Color presets</label>\n        <select class="setup-select">\n          ${await(async()=>{const e=await t;let n="";for(let t=0;t<e.length;t++)n+=`\n    <option value="${t}">${e[t].name}</option>\n    `;return n})()}\n        </select>\n      </div>  \n      <div class="color-block">\n        <label>Piano background</label>\n        <input type="color" value="#294F4E" class="setup-color">\n      </div>\n      <div class="color-block">\n        <label>Keys background</label>\n        <input type="color" value="#D6C1A9" class="setup-color">\n      </div>\n    </div>\n  <img src="assets/img/info-triangle.svg">\n</div>\n`)(),S.innerHTML+=await(async()=>`\n<div id="piano">\n  <div id="piano-w">\n    ${await f(!0)}\n  </div>\n  <div id="piano-b">\n    ${await f(!1)}\n  </div>\n</div>\n`)(),await(async()=>{const e=await t;l[0].addEventListener("input",(()=>{const e=l[0].value;for(let n=0;n<s.length;n++)s[n].style.background=e;for(let n=0;n<a.length;n++)a[n].style.color=e;piano.style.background=e})),l[1].addEventListener("input",(()=>{const e=l[1].value;for(let n=0;n<a.length;n++)a[n].style.background=e;for(let n=0;n<s.length;n++)s[n].style.color=e})),i[3].addEventListener("input",(()=>{const n=i[3].value;(e=>{for(let n=0;n<s.length;n++)s[n].style.background=e;for(let n=0;n<a.length;n++)a[n].style.color=e;piano.style.background=e})(e[n].piano),l[0].value=e[n].piano,(e=>{for(let n=0;n<a.length;n++)a[n].style.background=e;for(let n=0;n<s.length;n++)s[n].style.color=e})(e[n].keys),l[1].value=e[n].keys}))})(),await(()=>{const e=new AudioContext,n=e.createGain();n.connect(e.destination);const t=document.querySelector("#piano");let a=!1;t.addEventListener("mouseover",(async s=>{s.target.classList.contains("tile")&&(s.target.classList.add("tile-hover"),a&&await x(s,e,n,t),s.target.addEventListener("mouseleave",(e=>{e.target.classList.contains("tile")&&(e.target.classList.remove("tile-hover"),e.target.classList.remove("tile-pressed"))})))})),t.addEventListener("mousedown",(async s=>{a=!0,s.target.classList.contains("tile")&&await x(s,e,n,t)})),document.addEventListener("mouseup",(()=>{a=!1})),t.addEventListener("mouseup",(e=>{a=!1,e.target.classList.contains("tile")&&e.target.classList.remove("tile-pressed")})),t.addEventListener("mouseleave",(e=>{a=!1,e.target.classList.contains("tile")&&(e.target.classList.remove("tile-hover"),e.target.classList.remove("tile-pressed"))}))})(),await(async()=>{const e=new AudioContext,n=e.createGain();n.connect(e.destination),document.addEventListener("keydown",(async t=>{0==o.includes(t.keyCode)&&(await c(t,e,n),o.push(t.keyCode))}))})()},G=()=>{document.removeEventListener("keydown",c,!1),u.classList.remove("slide"),S.innerHTML="",S.innerHTML='\n  <div id="songs-list"></div>\n'},F=()=>{self.location.href="#top",G(),document.getElementById("songs-list").innerHTML=(e=>`<h3>Top Songs</h3><ul id="top">${(e=>{let n="";return e.forEach((e=>{n+=`\n    <li class="top-song">\n      <label class="top-position">${e.position}</label>\n      <div class="song">\n        <div class="player">\n          <button class="play-button">\n            <div class="play-button-back"></div>\n            <div class="play-button-front"></div> \n          </button>\n          <div class="play-data">\n            <label class="song-name">${e.name}</label>\n            <div class="play-line"></div>\n          </div>\n        </div>\n      </div>\n      <div class="song-info-alt">\n        <p class="alt-text">info</p>\n        <div class="song-info">\n          <label class="song-info-author">${e.author}</label>\n          <p class="song-info-line"></p>\n          <div class="song-info-mark">${w(e.mark)}</div>\n        </div>\n      </div>\n    </li>\n  `})),n})(e)}</ul>`)(M)},V=async e=>{self.location.href="#profile",u.classList.remove("slide"),S.innerHTML="",S.innerHTML=await(async e=>{const n=await g(),t=[];for(let a=0;a<n.length;a++)n[a].author==e.name&&t.push(n[a]);return`\n<div id="profile-section">\n  <div id="profile-window"> \n    <div id="pfp">\n      <img class="profile-avatar current-pfp" src="./assets/img/pfp/ico-man.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-demon.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-dragon.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-lotos.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-ninja.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-samurai.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-woman.svg">\n    </div>\n    <label id="profile-name">${e.name}</label>\n    <label class="profile-info">${e.rating} in rating</label>\n    <label class="profile-info">${t.length} songs</label>\n    <button class="profile-sec-btn">Start creating</button>\n    <label class="profile-sec-btn">Upload your song</label>\n  </div>\n  \n  <div id="profile-marked">\n    <ul id="marked">\n      ${L(e)?L(e):"You haven't marked anything yet"}\n    </ul>\n  </div>\n</div>\n<div id="songs-list">\n  <ul id="user-songs">\n    ${await E(e)?await E(e):"You haven't got any songs yet"}\n  </ul>\n</div>\n<div id="chat">\n  <div id="chat-head">1 online</div>\n  <div id="chat-messages-scroller">\n    <div id="chat-messages"></div>\n  </div>\n  <div id="chat-input">\n    <input id="chat-text-field" placeholder="Enter message..." autocomplete="off">\n    <div id="chat-send"></div>\n  </div>\n  <input>\n</div>\n`})(e);const n=await(async e=>{const n=await g(),t=[];for(let a=0;a<n.length;a++)n[a].author==e.name&&t.push(n[a]);return t})(e);await j(n),(e=>{const n=document.getElementById("chat-head"),t=document.getElementById("chat-messages"),a=document.getElementById("chat-text-field"),s=document.getElementById("chat-send"),l=io("https://pointing-poker-backend.herokuapp.com");l.emit("chat-connect-user",e.name),s.addEventListener("click",(()=>{""!==a.value&&l.emit("chat-message-request",a.value),a.value=""})),document.addEventListener("keydown",(e=>{13===e.keyCode&&(""!==a.value&&l.emit("chat-message-request",a.value),a.value="")})),l.on("chat-message-post",(e=>{var n,a;t.innerHTML+=(n=e[0],a=e[1],`\n<div class="${n===Q.name?"your":""} message">\n  <label class="message-user">${n}:</label>\n  <label class="message-text">${a}</label>\n  <div class="message-point"></div>\n</div>\n`)})),l.on("chat-send-all-users",(e=>{n.innerHTML=`${e.length} online`}))})(e),await(async e=>{const n=document.getElementsByClassName("profile-sec-btn")[0],t=document.getElementById("pfp"),a=document.getElementsByClassName("profile-sec-btn")[1];n.addEventListener("click",(async()=>{await U()})),t.addEventListener("click",(()=>{t.classList.toggle("open-pfp")})),t.addEventListener("mouseleave",(()=>{t.classList.remove("open-pfp")}));const s=document.getElementsByClassName("profile-avatar");for(let n=0;n<s.length;n++)s[n].classList.remove("current-pfp"),s[n].addEventListener("click",(async()=>{e.pfp=n,await I(e);for(let e=0;e<s.length;e++)s[e].classList.remove("current-pfp");s[e.pfp].classList.add("current-pfp")}));s[e.pfp].classList.add("current-pfp"),a.addEventListener("click",(async()=>{await $()}))})(e)},W=async()=>{self.location.href="#songs",u.classList.remove("slide"),S.innerHTML="",G();const e=await g();document.getElementById("songs-list").innerHTML=await(async e=>`<h3>All Songs</h3>\n<h4>\n  <div class="search-container">\n    <label class="search-text">Search/sort</label>\n    <input type="text" class="search-inp" id="chat-text-field" placeholder="Search" autocomplete="off"> \n    <button id="search-filter-btn">Search</button>\n    <span style="width: 100%; border-bottom: 3px solid #C1272D; margin-bottom: 15px;"></span>\n    Filter by authors \n    <select class="search-by">\n      ${await B()}\n    </select>\n    Filter by genre\n    <select class="search-by">\n      ${await C()}\n    </select>\n  </div>\n</h4>\n<ul id="top">${await T(e)}</ul>`)(e),await j(e);const n=document.getElementById("top");await q(n,T,!0)},Y=async()=>{self.location.href="#admin",u.classList.remove("slide");const e=await g();S.innerHTML=await(async e=>`\n<div id="admin-panel-container">\n  <div class="admin-panel-section">\n    <h3 class="admin-panel-h3">Users</h3>\n    <ul class = "admin-panel-list">\n      ${await(async()=>{const e=await b();let n="";return e.forEach((e=>{n+=`\n      <li class="admin-panel-element">\n        <div class="admin-panel-user-data">\n          <label class="id-label">ID: <span class="user-id-label">${e.id}</span></label>\n          <label>Username: <span class="name-label">${e.name}</span></label>\n          <label>Password: ${e.password}</label>\n        </div>\n        ${0!=e.id?'<button class="delete-song del-user">Delete user</button>':'<button class="delete-song del-user" style="display: none">Delete user</button>'}\n      </li>\n    `})),n})()}\n    </ul>\n  </div>\n  <div class="admin-panel-section">\n    <h3 class="admin-panel-h3">Songs</h3>\n    <h4 style="width: 29%">\n      <div class="search-container">\n        <label class="search-text">Search/sort</label>\n        <input type="text" class="search-inp" id="chat-text-field" placeholder="Search" autocomplete="off"> \n        <button id="search-filter-btn">Search</button>\n        <span style="width: 100%; border-bottom: 3px solid #C1272D; margin-bottom: 15px;"></span>\n        Filter by authors \n        <select class="search-by">\n          ${await B()}\n        </select>\n        Filter by genre\n        <select class="search-by">\n          ${await C()}\n        </select>\n      </div>\n    </h4>\n    <ul class="admin-panel-list">\n      ${await N(e)}\n    </ul>\n  </div>\n</div\n`)(e),await(async()=>{const e=document.getElementsByClassName("song-id-label"),n=document.getElementsByClassName("upd-song"),t=document.getElementsByClassName("del-song"),a=document.getElementsByClassName("admin-song-name"),s=document.getElementsByClassName("admin-song-url"),l=document.getElementsByClassName("admin-song-genre");for(let t=0;t<n.length;t++)n[t].addEventListener("click",(async()=>{await y({id:e[t].innerHTML,name:a[t].value,url:s[t].value,genre:l[t].value}),await Y()}));for(let n=0;n<t.length;n++)t[n].addEventListener("click",(async()=>{await v(e[n].innerHTML),await Y()}))})(),await(async()=>{const e=document.getElementsByClassName("user-id-label"),n=document.getElementsByClassName("name-label"),t=document.getElementsByClassName("del-user");for(let a=0;a<t.length;a++)t[a].addEventListener("click",(async()=>{await H({id:e[a].innerHTML,name:n[a].innerHTML}),await Y()}))})();const n=document.getElementsByClassName("admin-panel-list")[1];await q(n,N)},K=document.getElementsByClassName("aside-links")[0],z=document.getElementsByClassName("aside-links")[1],R=document.getElementsByClassName("aside-links")[2],X=document.getElementsByClassName("aside-links")[3],J=document.getElementsByClassName("aside-links")[4];document.addEventListener("mousemove",(e=>{const n=document.querySelector("#parallax");let t=window.innerWidth/2,a=window.innerHeight/2,s=`${50-.02*(e.clientX-t)}% ${50-.02*(e.clientY-a)}%`;n.style.backgroundPosition=s}));let Q=null;window.onload=async()=>{await(async()=>{await W(),A(),R.addEventListener("click",(async()=>{await U()})),K.addEventListener("click",(()=>{F()})),z.addEventListener("click",(async()=>{await W()})),X.addEventListener("click",(async()=>{Q?await V(Q):k("Please sign up first")})),J.addEventListener("click",(async()=>{await Y()}))})()}})();