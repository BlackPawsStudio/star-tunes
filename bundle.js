(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{K:()=>G});const t=[{name:"Conter",notes:[[{note:"C",freq:32.7,keyCode:68},{note:"D",freq:36.95,keyCode:70},{note:"E",freq:41.21,keyCode:71},{note:"F",freq:43.65,keyCode:72},{note:"G",freq:49,keyCode:74},{note:"A",freq:55,keyCode:75},{note:"B",freq:61.74,keyCode:76}],[{note:"C#",freq:34.65,keyCode:82},{note:"D#",freq:38.88,keyCode:84},{},{note:"F#",freq:46.25,keyCode:85},{note:"G#",freq:51.9,keyCode:73},{note:"A#",freq:58.26,keyCode:79}]]},{name:"Great",notes:[[{note:"C",freq:65.41,keyCode:68},{note:"D",freq:73.91,keyCode:70},{note:"E",freq:82.41,keyCode:71},{note:"F",freq:87.31,keyCode:72},{note:"G",freq:98,keyCode:74},{note:"A",freq:110,keyCode:75},{note:"B",freq:123.48,keyCode:76}],[{note:"C#",freq:69.3,keyCode:82},{note:"D#",freq:77.78,keyCode:84},{},{note:"F#",freq:92.5,keyCode:85},{note:"G#",freq:103.8,keyCode:73},{note:"A#",freq:116.54,keyCode:79}]]},{name:"Small",notes:[[{note:"C",freq:130.82,keyCode:68},{note:"D",freq:147.83,keyCode:70},{note:"E",freq:164.81,keyCode:71},{note:"F",freq:174.62,keyCode:72},{note:"G",freq:196,keyCode:74},{note:"A",freq:220,keyCode:75},{note:"B",freq:246.96,keyCode:76}],[{note:"C#",freq:138.59,keyCode:82},{note:"D#",freq:155.56,keyCode:84},{},{note:"F#",freq:185,keyCode:85},{note:"G#",freq:207,keyCode:73},{note:"A#",freq:233.08,keyCode:79}]]},{name:"One-line",notes:[[{note:"C",freq:261.63,keyCode:68},{note:"D",freq:293.66,keyCode:70},{note:"E",freq:329.63,keyCode:71},{note:"F",freq:349.23,keyCode:72},{note:"G",freq:392,keyCode:74},{note:"A",freq:440,keyCode:75},{note:"B",freq:493.88,keyCode:76}],[{note:"C#",freq:277.18,keyCode:82},{note:"D#",freq:311.13,keyCode:84},{},{note:"F#",freq:369.99,keyCode:85},{note:"G#",freq:415.3,keyCode:73},{note:"A#",freq:466.16,keyCode:79}]]},{name:"Two-line",notes:[[{note:"C",freq:523.25,keyCode:68},{note:"D",freq:587.32,keyCode:70},{note:"E",freq:659.26,keyCode:71},{note:"F",freq:698.46,keyCode:72},{note:"G",freq:784,keyCode:74},{note:"A",freq:880,keyCode:75},{note:"B",freq:987.75,keyCode:76}],[{note:"C#",freq:554.36,keyCode:82},{note:"D#",freq:622.26,keyCode:84},{},{note:"F#",freq:739.98,keyCode:85},{note:"G#",freq:830.6,keyCode:73},{note:"A#",freq:932.32,keyCode:79}]]},{name:"Three-line",notes:[[{note:"C",freq:1046.5,keyCode:68},{note:"D",freq:1174.6,keyCode:70},{note:"E",freq:1318.5,keyCode:71},{note:"F",freq:1396.9,keyCode:72},{note:"G",freq:1568,keyCode:74},{note:"A",freq:1720,keyCode:75},{note:"B",freq:1975.5,keyCode:76}],[{note:"C#",freq:1108.7,keyCode:82},{note:"D#",freq:1224.5,keyCode:84},{},{note:"F#",freq:1480,keyCode:85},{note:"G#",freq:1661.2,keyCode:73},{note:"A#",freq:1864.6,keyCode:79}]]},{name:"Four-line",notes:[[{note:"C",freq:2093,keyCode:68},{note:"D",freq:2349.2,keyCode:70},{note:"E",freq:2637,keyCode:71},{note:"F",freq:2793.8,keyCode:72},{note:"G",freq:3136,keyCode:74},{note:"A",freq:3440,keyCode:75},{note:"B",freq:3951,keyCode:76}],[{note:"C#",freq:2217.4,keyCode:82},{note:"D#",freq:2489,keyCode:84},{},{note:"F#",freq:2960,keyCode:85},{note:"G#",freq:3332.4,keyCode:73},{note:"A#",freq:3729.2,keyCode:79}]]}],n=(async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=color");return await e.json()})();for(let t=0;t<e.length;t++){const n={id:e[t][0],name:e[t][1],piano:e[t][2],keys:e[t][3]};e[t]=n}return e})(),s=document.getElementsByClassName("w-tile"),o=document.getElementsByClassName("b-tile"),a=document.getElementsByClassName("setup-color"),l=document.getElementsByClassName("setup-select"),i=e=>{try{const n=t[l[2].value].notes.flat().find((t=>{if(t.keyCode===e)return t}));return[n.freq,n.note]}catch{return!1}},r=[],d=(e,t,n)=>{try{const s=document.getElementById("volume"),o=+s.value/+s.max;n.gain.setValueAtTime(o*o,0);const a=t.createOscillator();a.type=l[1].options[l[1].value].innerHTML.toLowerCase(),a.connect(n);const c=document.getElementsByClassName("tile");if(i(e.keyCode)){const n=i(e.keyCode);let s;a.frequency.setValueAtTime(n[0],0);for(let e=0;e<c.length;e++)c[e].innerHTML===n[1]&&(s=c[e]);s.classList.add("tile-pressed"),a.start(),document.addEventListener("keyup",(()=>{r.splice(r.indexOf(e.keyCode),1),document.removeEventListener("keydown",d,!1),s.classList.remove("tile-pressed"),a.stop(t.currentTime+.03)}))}}catch{return}},c=document.getElementsByClassName("sun-cloud"),u=document.getElementById("sun"),m=document.getElementsByTagName("aside")[0],p=document.getElementById("body-container");u.addEventListener("click",(()=>{m.classList.toggle("slide"),p.addEventListener("click",(()=>{m.classList.remove("slide")}))})),u.addEventListener("mouseenter",(()=>{c[0].classList.add("cloud-move-f"),c[1].classList.add("cloud-move-b"),u.addEventListener("mouseleave",(()=>{c[0].classList.remove("cloud-move-f"),c[1].classList.remove("cloud-move-b")}))}));const v=(async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=waves");return await e.json()})();for(let t=0;t<e.length;t++){const n=e[t][1];e[t]=n}return e})(),y=async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=songs");return await e.json()})();for(let t=0;t<e.length;t++){const n={id:e[t][0],name:e[t][1],url:e[t][2],mark:e[t][3],reviews:e[t][4],author:e[t][5]};e[t]=n}return e},g=(y(),async e=>{const t=await fetch(`https://star-tunes.herokuapp.com/?delete=song&id=${e}`);console.log(await t.json())}),f=e=>{let n="";const s=e?7:6;for(let o=0;o<s;o++)n+=e?`<div class="w-tile tile">${t[0].notes[0][o].note}</div>`:`<div class="b-tile tile">${t[0].notes[1][o].note}</div>`;return n},k=e=>{let t="";for(let n=0;n<e.marked.length;n++)t+='\n    <li class="marked-song">\n      <label class="top-position">0</label>\n      <label class="marked-name">Cringe song</label>\n      <div class="song-info-alt">\n        <p class="alt-text">info</p>\n        <div class="song-info">\n          <label class="song-info-author">username</label>\n          <p class="song-info-line"></p>\n          <div class="song-info-mark">☆</div>\n        </div>\n      </div>\n    </li>\n    ';return t},h=async e=>{const t=await y(),n=[];for(let s=0;s<t.length;s++)t[s].author==e.name&&n.push(t[s]);let s="";for(let e=0;e<n.length;e++)s+=`\n    <li class="top-song">\n      <div class="song">\n        <div class="player">\n          <button class="play-button">\n            <div class="play-button-back"></div>\n            <div class="play-button-front"></div> \n          </button>\n          <div class="play-data">\n            <label class="song-name">${n[e].name}</label>\n            <div class="play-line"></div>\n          </div>\n        </div>\n      </div>\n      <div class="song-info-alt">\n        <button class="delete-song">Delete song</button>\n      </div>\n    </li>\n    `;return s},b=[{name:"song name",author:"author name",song:"song file",mark:5,position:0},{name:"song name",author:"author name",song:"song file",mark:4,position:2},{name:"song name",author:"author name",song:"song file",mark:5,position:1},{name:"song name",author:"author name",song:"song file",mark:5,position:4},{name:"song name",author:"author name",song:"song file",mark:3,position:3},{name:"song name",author:"author name",song:"song file",mark:5,position:0},{name:"song name",author:"author name",song:"song file",mark:4,position:2},{name:"song name",author:"author name",song:"song file",mark:5,position:1},{name:"song name",author:"author name",song:"song file",mark:5,position:4},{name:"song name",author:"author name",song:"song file",mark:3,position:3}],C=async e=>{const t=await fetch(`https://star-tunes.herokuapp.com/?update=user&id=${e.id}&pfp=${e.pfp}`);console.log(await t.json())},L=async()=>{const e=await(async()=>{const e=await fetch("https://star-tunes.herokuapp.com/?request=users");return await e.json()})();for(let t=0;t<e.length;t++){const n={id:e[t][0],name:e[t][1],password:e[t][2],rating:e[t][3],marked:["cringe"],songs:["cringe"],pfp:e[t][5]};console.log(e[t][0],e[t][1],e[t][2],e[t][3],e[t][4],e[t][5]),e[t]=n}return e},E=(e,n,s,o,a)=>{e.target.classList.add("tile-pressed");const i=document.getElementById("volume"),r=+i.value/+i.max;s.gain.setValueAtTime(r*r,0);const d=n.createOscillator();var c;d.type=l[1].options[l[1].value].innerHTML.toLowerCase(),d.frequency.setValueAtTime((c=e.target.innerHTML,t[l[2].value].notes.flat().find((e=>{if(e.note===c)return e})).freq),0),d.connect(s),d.start(),document.addEventListener("mouseup",(()=>{d.stop(n.currentTime)})),o.addEventListener("mouseup",(e=>{d.stop(n.currentTime),e.target.classList.contains("tile")&&e.target.classList.remove("tile-pressed")})),e.target.addEventListener("mouseleave",(()=>{d.stop(n.currentTime)})),o.addEventListener("mouseleave",(e=>{d.stop(n.currentTime),e.target.classList.contains("tile")&&(e.target.classList.remove("tile-hover"),e.target.classList.remove("tile-pressed"))}))},w=document.querySelector("main"),q=document.getElementById("register-btns"),B=()=>{q.innerHTML="",q.innerHTML='\n<button class="header-btn">LOG IN</button>\n<button class="header-btn">SIGN IN</button>\n';const e=document.getElementsByClassName("header-btn")[0];document.getElementsByClassName("header-btn")[1].addEventListener("click",(async()=>{await $(!0)})),e.addEventListener("click",(async()=>{await $(!1)}))},$=async e=>{const t=document.getElementById("popup"),n=document.getElementById("popup-container"),s=document.getElementsByClassName("popup-input");n.style.opacity=100,n.style.visibility="visible",t.innerHTML="",t.innerHTML=(e=>`\n  <div id="popup-sakura"></div>\n  <div id="popup-mountains"></div>\n    <form id="popup-frames" onsubmit="event.preventDefault()">\n    <label>${e?"Sign Up":"Log In"}</label>\n    <input class="popup-input" type="text" placeholder="Name here" autocomplete="false" required>\n    <input class="popup-input" type="password" placeholder="Password" autocomplete="false" required>\n    <div id="popup-btns">\n      <button class="popup-btn" type="submit">${e?"Sign up":"Log In"}</button>\n      <button class="popup-btn" type="submit">Cancel</button>\n    </div>\n  </form>\n  `)(e);const o=document.getElementsByClassName("popup-btn")[0],a=document.getElementsByClassName("popup-btn")[1];let l=await L();o.addEventListener("click",(async()=>{if(e){let e=!1;if(s[0].value&&s[1].value){for(let t=0;t<l.length;t++)l[t].name===s[0].value&&(e=!0);if(e)s[0].value="",s[0].placeholder="This username is taken";else{const e=(t,n)=>n.map((e=>+e.id)).includes(t)?e(++t,n):t,t={id:e(0,l),name:s[0].value,password:s[1].value,rating:0,marked:"''",songs:[],pfp:0};await(async e=>{const t=await fetch(`https://star-tunes.herokuapp.com/?create=user&id=${e.id}&name=${e.name}&password=${e.password}&rating=${e.rating}&marked=${e.marked}&pfp=${e.pfp}`);console.log(await t.json())})(t),l=await L(),n.style.opacity=0,n.style.visibility="hidden",G=t,await T(G)}}}else{let e=null;for(let t=0;t<l.length;t++)s[0].value&&s[1].value&&l[t].name==s[0].value&&(e=l[t]);e?e.password===s[1].value?(G=e,await T(G),n.style.opacity=0,n.style.visibility="hidden"):(s[1].value="",s[1].placeholder="Wrong password"):(s[0].value="",s[0].placeholder="No such user")}})),a.addEventListener("click",(()=>{n.style.opacity=0,n.style.visibility="hidden"})),document.addEventListener("keydown",(e=>{27===e.keyCode&&(n.style.opacity=0,n.style.visibility="hidden")}))},T=async e=>{var t;q.innerHTML="",q.innerHTML=`\n<div id="profile">\n  <button class="header-btn">\n  ${(t=e.name).length>10?t.split("").slice(0,9).join("")+"...":t}\n  </button>\n  <div id="profile-content">\n    <button class="profile-btn">Enter profile</button>\n    <button class="profile-btn">Log out</button>\n    <button class="profile-btn">Delete user</button>\n  </div>\n</div>\n`,await(async e=>{const t=document.getElementsByClassName("profile-btn")[0],n=document.getElementsByClassName("profile-btn")[1],s=document.getElementsByClassName("profile-btn")[2],o=document.getElementById("ask-container"),a=document.getElementsByClassName("question-btn"),l=document.getElementById("question-place");let i=await L();t.addEventListener("click",(()=>{A(e)})),n.addEventListener("click",(()=>{l.innerHTML="Do you want to log out?",o.classList.add("shown"),a[0].addEventListener("click",(()=>{o.classList.remove("shown"),G=null,B(),I()})),a[1].addEventListener("click",(()=>{o.classList.remove("shown")}))})),s.addEventListener("click",(async()=>{l.innerHTML="Are you sure you want to delete your account?",o.classList.add("shown"),a[0].addEventListener("click",(async()=>{o.classList.remove("shown"),await(async e=>{const t=await fetch(`https://star-tunes.herokuapp.com/?delete=user&id=${e.id}`),n=await fetch(`https://star-tunes.herokuapp.com/?delete=songs&author=${e.name}`);console.log(await t.json(),await n.json())})(e),i.splice(i.indexOf(i.find((t=>{if(t.name===e.name)return t}))),1),G=null,B(),I()})),a[1].addEventListener("click",(()=>{o.classList.remove("shown")}))}))})(e)},N=async()=>{self.location.href="#piano",m.classList.remove("slide"),w.innerHTML=await(async()=>`\n<div class="piano-setup">\n  <label>Instrument settings</label>\n  <div class="setup-content">\n    <div class="setup-block">\n      <label>Instrument presets</label>\n      <select class="setup-select">\n        <option value="0">Synthezator</option>\n        <option value="1">Classic piano</option>\n        <option value="2">Dudka ebat'</option>\n      </select>\n    </div>  \n    <div class="setup-block">\n      <label>Wave type</label>\n      <select class="setup-select">\n        ${await(async()=>{let e="";const t=await v;for(let n=0;n<t.length;n++)e+=`\n    <option value="${n}">${t[n]}</option>\n    `;return e})()}\n      </select>\n    </div>  \n    <div class="setup-block">\n      <label>Octaves</label>\n      <select class="setup-select">\n        ${(()=>{let e="";for(let n=0;n<t.length;n++)e+=3===n?`\n      <option value="${n}" selected>${t[n].name}</option>\n      `:`\n      <option value="${n}">${t[n].name}</option>\n      `;return e})()}\n      </select>\n    </div>  \n    <div class="setup-block">\n      <label>Volume</label>\n      <input type="range" id="volume" min="0" max="100" value="50">\n    </div>\n  </div>\n  <img src="assets/img/info-triangle.svg">\n  </div>\n  <div class="piano-setup" id="color-setup">\n  <label>Color settings</label>\n    <div class="setup-content">\n      <div class="setup-block">\n        <label>Color presets</label>\n        <select class="setup-select">\n          ${await(async()=>{const e=await n;let t="";for(let n=0;n<e.length;n++)t+=`\n    <option value="${n}">${e[n].name}</option>\n    `;return t})()}\n        </select>\n      </div>  \n      <div class="color-block">\n        <label>Piano background</label>\n        <input type="color" value="#294F4E" class="setup-color">\n      </div>\n      <div class="color-block">\n        <label>Keys background</label>\n        <input type="color" value="#D6C1A9" class="setup-color">\n      </div>\n    </div>\n  <img src="assets/img/info-triangle.svg">\n</div>\n`)(),w.innerHTML+=`\n<div id="piano">\n  <div id="piano-w">\n    ${f(!0)}\n  </div>\n  <div id="piano-b">\n    ${f(!1)}\n  </div>\n</div>\n`,await(async()=>{const e=await n;a[0].addEventListener("input",(()=>{const e=a[0].value;for(let t=0;t<o.length;t++)o[t].style.background=e;for(let t=0;t<s.length;t++)s[t].style.color=e;piano.style.background=e})),a[1].addEventListener("input",(()=>{const e=a[1].value;for(let t=0;t<s.length;t++)s[t].style.background=e;for(let t=0;t<o.length;t++)o[t].style.color=e})),l[3].addEventListener("input",(()=>{const t=l[3].value;(e=>{for(let t=0;t<o.length;t++)o[t].style.background=e;for(let t=0;t<s.length;t++)s[t].style.color=e;piano.style.background=e})(e[t].piano),a[0].value=e[t].piano,(e=>{for(let t=0;t<s.length;t++)s[t].style.background=e;for(let t=0;t<o.length;t++)o[t].style.color=e})(e[t].keys),a[1].value=e[t].keys}))})(),(()=>{const e=new AudioContext,t=e.createGain();t.connect(e.destination);const n=document.querySelector("#piano");let s=!1;n.addEventListener("mouseover",(o=>{o.target.classList.contains("tile")&&(o.target.classList.add("tile-hover"),s&&E(o,e,t,n),o.target.addEventListener("mouseleave",(e=>{e.target.classList.contains("tile")&&(e.target.classList.remove("tile-hover"),e.target.classList.remove("tile-pressed"))})))})),n.addEventListener("mousedown",(o=>{s=!0,o.target.classList.contains("tile")&&E(o,e,t,n)})),document.addEventListener("mouseup",(()=>{s=!1})),n.addEventListener("mouseup",(e=>{s=!1,e.target.classList.contains("tile")&&e.target.classList.remove("tile-pressed")})),n.addEventListener("mouseleave",(e=>{s=!1,e.target.classList.contains("tile")&&(e.target.classList.remove("tile-hover"),e.target.classList.remove("tile-pressed"))}))})(),(()=>{const e=new AudioContext,t=e.createGain();t.connect(e.destination),document.addEventListener("keydown",(n=>{!1===r.includes(n.keyCode)&&(d(n,e,t),r.push(n.keyCode))}))})()},I=()=>{self.location.href="#top",document.removeEventListener("keydown",d,!1),m.classList.remove("slide"),w.innerHTML="",w.innerHTML='\n  <div id="songs-list"></div>\n',document.getElementById("songs-list").innerHTML=(e=>`<h3>Top Songs</h3><ul id="top">${(e=>{let t="";return e.forEach((e=>{t+=`\n    <li class="top-song">\n      <label class="top-position">${e.position}</label>\n      <div class="song">\n        <div class="player">\n          <button class="play-button">\n            <div class="play-button-back"></div>\n            <div class="play-button-front"></div> \n          </button>\n          <div class="play-data">\n            <label class="song-name">${e.name}</label>\n            <div class="play-line"></div>\n          </div>\n        </div>\n      </div>\n      <div class="song-info-alt">\n        <p class="alt-text">info</p>\n        <div class="song-info">\n          <label class="song-info-author">${e.author}</label>\n          <p class="song-info-line"></p>\n          <div class="song-info-mark">${(e=>{let t="";for(let n=0;n<e;n++)t+="☆";return t})(e.mark)}</div>\n        </div>\n      </div>\n    </li>\n  `})),t})(e)}</ul>`)(b)},A=async e=>{self.location.href="#profile",m.classList.remove("slide"),w.innerHTML="",w.innerHTML=await(async e=>{const t=await y(),n=[];for(let s=0;s<t.length;s++)t[s].author==e.name&&n.push(t[s]);return`\n<div id="profile-section">\n  <div id="profile-window"> \n    <div id="pfp">\n      <img class="profile-avatar current-pfp" src="./assets/img/pfp/ico-man.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-demon.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-dragon.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-lotos.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-ninja.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-samurai.svg">\n      <img class="profile-avatar" src="./assets/img/pfp/ico-woman.svg">\n    </div>\n    <label id="profile-name">${e.name}</label>\n    <label class="profile-info">${e.rating} in rating</label>\n    <label class="profile-info">${n.length} songs</label>\n    <button class="profile-sec-btn">Start creating</button>\n    <label class="profile-sec-btn">Upload your song</label>\n  </div>\n  \n  <div id="profile-marked">\n    <ul id="marked">\n      ${k(e)?k(e):"You haven't marked anything yet"}\n    </ul>\n  </div>\n</div>\n<div id="songs-list">\n  <ul id="user-songs">\n    ${await h(e)?await h(e):"You haven't got any songs yet"}\n  </ul>\n</div>\n<div id="chat">\n  <div id="chat-head">1 online</div>\n  <div id="chat-messages-scroller">\n    <div id="chat-messages"></div>\n  </div>\n  <div id="chat-input">\n    <input id="chat-text-field" placeholder="Enter message..." autocomplete="off">\n    <div id="chat-send"></div>\n  </div>\n  <input>\n</div>\n`})(e),await(async e=>{const t=await y(),n=[];for(let s=0;s<t.length;s++)t[s].author==e.name&&n.push(t[s]);const s=document.getElementsByClassName("play-button"),o=document.getElementsByClassName("delete-song");for(let e=0;e<s.length;e++){let n=new Audio(t[e].url);s[e].addEventListener("click",(()=>{s[e].classList.toggle("active-btn"),console.log(t[e].url),s[e].classList.contains("active-btn")?n.play():n.pause()}))}for(let e=0;e<o.length;e++)o[e].addEventListener("click",(async()=>{await g(e),await A(G)}))})(e),(e=>{const t=document.getElementById("chat-head"),n=document.getElementById("chat-messages"),s=document.getElementById("chat-text-field"),o=document.getElementById("chat-send"),a=io("https://pointing-poker-backend.herokuapp.com");a.emit("chat-connect-user",e.name),o.addEventListener("click",(()=>{""!==s.value&&a.emit("chat-message-request",s.value),s.value=""})),document.addEventListener("keydown",(e=>{13===e.keyCode&&(""!==s.value&&a.emit("chat-message-request",s.value),s.value="")})),a.on("chat-message-post",(e=>{var t,s;n.innerHTML+=(t=e[0],s=e[1],`\n<div class="${t===G.name?"your":""} message">\n  <label class="message-user">${t}:</label>\n  <label class="message-text">${s}</label>\n  <div class="message-point"></div>\n</div>\n`)})),a.on("chat-send-all-users",(e=>{t.innerHTML=`${e.length} online`}))})(e),await(async e=>{const t=document.getElementsByClassName("profile-sec-btn")[0],n=document.getElementById("pfp"),s=document.getElementsByClassName("profile-sec-btn")[1];t.addEventListener("click",(async()=>{await N()})),n.addEventListener("click",(()=>{n.classList.toggle("open-pfp")})),n.addEventListener("mouseleave",(()=>{n.classList.remove("open-pfp")}));const o=document.getElementsByClassName("profile-avatar");for(let t=0;t<o.length;t++)o[t].classList.remove("current-pfp"),o[t].addEventListener("click",(async()=>{e.pfp=t,await C(e),console.log(e);for(let e=0;e<o.length;e++)o[e].classList.remove("current-pfp");o[e.pfp].classList.add("current-pfp")}));o[e.pfp].classList.add("current-pfp"),s.addEventListener("click",(async()=>{await(()=>{const e=document.getElementById("url-container"),t=document.getElementsByClassName("message-btn")[1],n=document.getElementsByClassName("message-btn")[2],s=document.getElementsByClassName("url-input");e.style.opacity=100,e.style.visibility="visible";const o=(e,t)=>t.map((e=>+e.id)).includes(e)?o(++e,t):e;t.addEventListener("click",(async()=>{const t=s[1].value.replace(/\\/g,"/"),n=await y(),a={id:o(0,n),name:s[0].value,url:t,mark:0,reviews:0,author:G.name};await(async e=>{const t=await fetch(`https://star-tunes.herokuapp.com/?create=song&id=${e.id}&name=${e.name}&url=${e.url}&mark=${e.mark}&reviews=${e.reviews}&author=${e.author}`);console.log(await t.json())})(a),s[0].value="",s[1].value="",e.style.opacity=0,e.style.visibility="hidden",await A(G)})),n.addEventListener("click",(()=>{s[0].value="",s[1].value="",e.style.opacity=0,e.style.visibility="hidden"}))})()}))})(e)},H=document.getElementsByClassName("aside-links")[0],M=document.getElementsByClassName("aside-links")[1],D=document.getElementsByClassName("aside-links")[2];document.addEventListener("mousemove",(e=>{const t=document.querySelector("#parallax");let n=window.innerWidth/2,s=window.innerHeight/2,o=`${50-.02*(e.clientX-n)}% ${50-.02*(e.clientY-s)}%`;t.style.backgroundPosition=o}));let G=null;I(),B(),M.addEventListener("click",(async()=>{await N()})),H.addEventListener("click",(()=>{I()})),D.addEventListener("click",(async()=>{G?await A(G):(e=>{const t=document.getElementById("message-container"),n=document.getElementsByClassName("message-btn")[0];document.getElementById("message-text").innerHTML="Please sign up first",t.style.opacity=100,t.style.visibility="visible",n.addEventListener("click",(()=>{t.style.opacity=0,t.style.visibility="hidden"})),document.addEventListener("keydown",(e=>{27!==e.keyCode&&13!==e.keyCode||(t.style.opacity=0,t.style.visibility="hidden")}))})()}))})();